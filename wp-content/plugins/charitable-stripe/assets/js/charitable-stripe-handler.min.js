!function(a){var b=a("body"),c=function(a,c){var d=!1,e=StripeCheckout.configure({key:CHARITABLE_STRIPE_VARS.key,image:"",locale:"auto",token:function(a){d=!0,c.get_input("stripe_token").val(a.id),b.trigger("charitable:form:process",c)},closed:function(){!0!==d&&c.hide_processing()}}),f=function(a,b){if("stripe"===b.get_payment_method()&&0===b.errors.length){var c=100*b.get_amount();b.pause_processing=!0,e.open({name:CHARITABLE_STRIPE_VARS.site_name,description:b.get_description(),email:b.get_email(),currency:CHARITABLE_STRIPE_VARS.currency,amount:c})}};b.on("charitable:form:validate",f)},d=function(){CHARITABLE.Donation_Form.prototype.is_valid_card_number=function(){return Stripe.card.validateCardNumber(this.get_cc_number().replace(/ /g,""))};var a=function(a,c){a.error?c.add_error(a.error.message):(c.get_input("stripe_token").val(a.id),b.trigger("charitable:form:process",c))},c=function(b,c){var d=c.get_cc_number(),e=c.get_cc_cvc(),f=c.get_cc_expiry_month(),g=c.get_cc_expiry_year();c.clear_cc_fields(),"stripe"===c.get_payment_method()&&(b.preventDefault(),Stripe.card.validateExpiry(f,g)||c.add_error(CHARITABLE_VARS.error_invalid_cc_expiry),0===c.errors.length&&(c.pause_processing=!0,Stripe.card.createToken({number:d,cvc:e,exp_month:f,exp_year:g},function(b,d){a(d,c)})))};Stripe.setPublishableKey(CHARITABLE_STRIPE_VARS.key),b.on("charitable:form:validate",c)};b.on("charitable:form:initialize",function(a,b){"checkout"===CHARITABLE_STRIPE_VARS.mode?c(a,b):d(a,b)})}(jQuery);